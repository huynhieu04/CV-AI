<!-- src/app/pages/reports/reports/reports.html -->
<div class="page page--reports">
    <!-- HEADER -->
    <header class="page__header">
        <div>
            <h1 class="page__title">B√°o C√°o</h1>
            <p class="page__subtitle">
                Th·ªëng k√™ hi·ªáu qu·∫£ ph√¢n lo·∫°i CV:
                <strong>ph√π h·ª£p</strong> ‚Äì <strong>ti·ªÅm nƒÉng</strong> ‚Äì <strong>kh√¥ng ph√π h·ª£p</strong>.
            </p>
        </div>
    </header>

    <!-- CARD CH√çNH -->
    <section class="card card--shadow reports-card">
        <div class="reports-card__header">
            <div>
                <h2 class="card__title">T·ªïng quan k·∫øt qu·∫£ ph√¢n lo·∫°i</h2>
                <p class="card__sub">
                    D·ªØ li·ªáu t·ªïng h·ª£p t·ª´ b·∫£ng
                    <span class="mono">MatchResult</span> trong MongoDB
                    (<span class="mono">API /api/reports/summary</span>).
                </p>
            </div>

            <button type="button" class="btn btn--secondary reports-refresh-btn" [disabled]="isLoading"
                (click)="loadOverview()">
                {{ isLoading ? 'ƒêang t·∫£i‚Ä¶' : 'Refresh' }}
            </button>
        </div>

        <!-- LOADING STATE -->
        <div *ngIf="isLoading" class="reports-loading">
            <div class="spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu b√°o c√°o‚Ä¶</p>
        </div>

        <!-- ERROR -->
        <div *ngIf="!isLoading && errorMessage" class="reports-error">
            {{ errorMessage }}
        </div>

        <!-- NO DATA -->
        <div *ngIf="!isLoading && !errorMessage && (!overview || overview.totalCv === 0)" class="reports-empty">
            <div class="reports-empty__icon">üìä</div>
            <div>
                <h3 class="reports-empty__title">Ch∆∞a c√≥ d·ªØ li·ªáu th·ªëng k√™</h3>
                <p class="reports-empty__text">
                    Vui l√≤ng ch·∫°y th·ª≠ AI classification ƒë·ªÉ sinh MatchResult r·ªìi quay l·∫°i trang b√°o c√°o.
                </p>
            </div>
        </div>

        <!-- DATA GRID -->
        <div *ngIf="!isLoading && !errorMessage && overview && overview.totalCv > 0" class="reports-grid">
            <!-- T·ªïng CV -->
            <div class="reports-stat reports-stat--primary">
                <div class="stat-label">T·ªïng s·ªë CV ƒë√£ ph√¢n lo·∫°i</div>
                <div class="stat-value">{{ overview.totalCv }}</div>
                <div class="stat-caption">100%</div>
            </div>

            <!-- CV ph√π h·ª£p -->
            <div class="reports-stat reports-stat--success">
                <div class="stat-label">CV ph√π h·ª£p</div>
                <div class="stat-value">{{ overview.suitable }}</div>
                <div class="stat-caption">{{ overview.suitablePercent | number : '1.0-1' }}%</div>
            </div>

            <!-- CV ti·ªÅm nƒÉng -->
            <div class="reports-stat reports-stat--warning">
                <div class="stat-label">CV ti·ªÅm nƒÉng</div>
                <div class="stat-value">{{ overview.potential }}</div>
                <div class="stat-caption">{{ overview.potentialPercent | number : '1.0-1' }}%</div>
            </div>

            <!-- CV kh√¥ng ph√π h·ª£p -->
            <div class="reports-stat reports-stat--danger">
                <div class="stat-label">CV kh√¥ng ph√π h·ª£p</div>
                <div class="stat-value">{{ overview.notFit }}</div>
                <div class="stat-caption">{{ overview.notFitPercent | number : '1.0-1' }}%</div>
            </div>
        </div>
    </section>
</div>